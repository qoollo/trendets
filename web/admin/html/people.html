<div>
    <form class="form-inline" name="form">
        <div class="form-group col-md-4">
            <label class="sr-only" for="src-name">Имя</label>
            <input type="text" ng-model="rest.toAdd.name" class="form-control" id="toadd-name" placeholder="Имя">
        </div>
        <div class="form-group">
            <label class="sr-only" for="src-webcite">Сокращённое имя</label>
            <input type="text" ng-model="rest.toAdd.shortName" class="form-control" id="toadd-shortname" placeholder="Сокращённое имя">
        </div>
        <div class="form-group">
            <label class="sr-only" for="src-webcite">Фото</label>
            <input type="file" fileread="rest.toAdd.photo" class="form-control" id="toadd-photo" placeholder="Фото">
        </div>
        <button type="submit" class="btn btn-default" ng-click="rest.addItem(rest.toAdd)" ng-disabled="!form.$valid">Добавить</button>

        <div class="progress" ng-show="rest.isInProgress(rest.toAdd)">
            <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                <span class="sr-only">In progress...</span>
            </div>
        </div>
        <div ng-repeat="e in rest.getErrors(rest.toAdd)" class="alert alert-danger" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="rest.removeError(rest.toAdd, e)"><span aria-hidden="true">&times;</span></button>
            {{e.time|date:'HH:mm:ss'}} {{e.error}}
        </div>
    </form>

    <table class="table table-stripped table-hover table-clickable">
        <thead>
            <tr>
                <th>Id</th>
                <th>Имя</th>
                <th>Сокращённое имя</th>
                <th>Фото</th>
                <th class="col-md-2"></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat-start="src in rest.items"
                ng-click="rest.selectItem(src)"
                ng-class="{active: rest.isActive(src)}">
                <td>{{src.id}}</td>
                <td>
                    <span ng-show="!rest.isInEditMode() || !rest.isActive(src)">{{src.name}}</span>
                    <input ng-show="rest.isActive(src) && rest.isInEditMode()" type="text" class="form-control" ng-model="src.name" required placeholder="Имя" />
                </td>
                <td>
                    <span ng-show="!rest.isInEditMode() || !rest.isActive(src)">{{src.shortName}}</span>
                    <input ng-show="rest.isActive(src) && rest.isInEditMode()" type="text" ng-model="src.shortName" class="form-control" placeholder="Сокращённое имя">
                </td>
                <td>
                    <img ng-src="{{src.photo}}" class="person-photo"/>
                    <input ng-show="rest.isActive(src) && rest.isInEditMode()" type="file" fileread="src.photo" class="form-control" placeholder="Фото">
                </td>
                <td>
                    <button class="btn btn-xs btn-warning" ng-show="rest.isActive(src) && rest.isInNormalMode()" ng-click="rest.toggleEditMode(src)">Редактировать</button>
                    <button class="btn btn-xs btn-danger" ng-show="rest.isActive(src) && rest.isInNormalMode()" ng-click="rest.toggleDeleteMode(src)">Удалить</button>

                    <button class="btn btn-xs btn-success" ng-show="rest.isActive(src) && rest.isInEditMode()" ng-click="rest.editItem(src)">Сохранить</button>
                    <button class="btn btn-xs btn-default" ng-show="rest.isActive(src) && rest.isInEditMode()" ng-click="rest.toggleEditMode()">Отмена</button>

                    <button class="btn btn-xs btn-danger" ng-show="rest.isActive(src) && rest.isInDeleteMode()" ng-click="rest.deleteItem(src)">Удалить</button>
                    <button class="btn btn-xs btn-default" ng-show="rest.isActive(src) && rest.isInDeleteMode()" ng-click="rest.toggleDeleteMode()">Отмена</button>

                </td>
            </tr>
            <tr ng-repeat="e in rest.getErrors(src)">
                <td colspan="100">
                    <div class="alert alert-danger" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close" ng-click="rest.removeError(src, e)"><span aria-hidden="true">&times;</span></button>
                        {{e.time|date:'HH:mm:ss'}} {{e.error}}
                    </div>
                </td>
            </tr>
            <tr ng-repeat-end ng-show="rest.isInProgress(src)">
                <td colspan="100">
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                            <span class="sr-only">In progress...</span>
                        </div>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>